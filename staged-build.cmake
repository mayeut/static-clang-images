if (NOT DEFINED LLVM_HOST_TRIPLE)
  # 1st stage native-build
  set(TOOLCHAIN_PREFIX "/usr/bin")
  set(LLVM_ENABLE_PROJECTS "clang;lld" CACHE STRING "")
else()
  # 2nd stage cross-build
  if (NOT DEFINED LLVM_NATIVE_TOOL_DIR)
    message(FATAL_ERROR "LLVM_NATIVE_TOOL_DIR shall be defined")
  endif()

  set(TOOLCHAIN_PREFIX "${LLVM_NATIVE_TOOL_DIR}")

  # cross build
  set(CMAKE_SYSTEM_NAME "Linux" CACHE STRING "")
  set(CMAKE_C_COMPILER_TARGET   "${LLVM_HOST_TRIPLE}" CACHE STRING "")
  set(CMAKE_CXX_COMPILER_TARGET "${LLVM_HOST_TRIPLE}" CACHE STRING "")
  set(CMAKE_ASM_COMPILER_TARGET "${LLVM_HOST_TRIPLE}" CACHE STRING "")
  set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM "NEVER" CACHE STRING "")
  set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY "ONLY" CACHE STRING "")
  set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE "ONLY" CACHE STRING "")
  set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE "ONLY" CACHE STRING "")
  set(PKG_CONFIG_EXECUTABLE "/usr/bin/${LLVM_HOST_TRIPLE}-pkg-config" CACHE INTERNAL "")

  set(LLVM_ENABLE_PROJECTS "clang;lld" CACHE STRING "")

  # static build
  set(CMAKE_EXE_LINKER_FLAGS "-static-libgcc -static" CACHE STRING "")
  set(CMAKE_FIND_LIBRARY_SUFFIXES ".a" CACHE STRING "")
  set(CMAKE_LINK_SEARCH_START_STATIC ON CACHE BOOL "")
  set(CMAKE_SKIP_RPATH ON CACHE BOOL "")
  set(LLVM_STATIC_LINK_CXX_STDLIB ON CACHE BOOL "")
  set(LLVM_USE_STATIC_ZSTD  ON CACHE BOOL "")
  set(ZLIB_USE_STATIC_LIBS ON CACHE BOOL "")
endif()

set(CMAKE_C_COMPILER   "${TOOLCHAIN_PREFIX}/clang"   CACHE INTERNAL "" FORCE)
set(CMAKE_CXX_COMPILER "${TOOLCHAIN_PREFIX}/clang++" CACHE INTERNAL "" FORCE)
set(CMAKE_ASM_COMPILER "${TOOLCHAIN_PREFIX}/clang"   CACHE INTERNAL "" FORCE)

set(CMAKE_ADDR2LINE "${TOOLCHAIN_PREFIX}/llvm-addr2line" CACHE INTERNAL "" FORCE)
set(CMAKE_AR        "${TOOLCHAIN_PREFIX}/llvm-ar"        CACHE INTERNAL "" FORCE)
set(CMAKE_DLLTOOL   "${TOOLCHAIN_PREFIX}/llvm-dlltool"   CACHE INTERNAL "" FORCE)
set(CMAKE_OBJDUMP   "${TOOLCHAIN_PREFIX}/llvm-objdump"   CACHE INTERNAL "" FORCE)
set(CMAKE_RANLIB    "${TOOLCHAIN_PREFIX}/llvm-ranlib"    CACHE INTERNAL "" FORCE)
set(CMAKE_READELF   "${TOOLCHAIN_PREFIX}/llvm-readelf"   CACHE INTERNAL "" FORCE)
set(CMAKE_STRIP     "${TOOLCHAIN_PREFIX}/llvm-strip"     CACHE INTERNAL "" FORCE)

set(CMAKE_BUILD_TYPE  "Release" CACHE STRING "")
set(CMAKE_LINKER_TYPE "LLD"     CACHE STRING "")

# LLVM options
set(LLVM_APPEND_VC_REV OFF CACHE BOOL "")

set(LLVM_ENABLE_ASSERTIONS    OFF      CACHE BOOL "")
set(LLVM_ENABLE_BINDINGS      OFF      CACHE BOOL "")
set(LLVM_ENABLE_CURL          OFF      CACHE STRING "")
set(LLVM_ENABLE_EH            OFF      CACHE BOOL "")
set(LLVM_ENABLE_FFI           OFF      CACHE BOOL "")
set(LLVM_ENABLE_HTTPLIB       OFF      CACHE STRING "")
set(LLVM_ENABLE_LIBCXX        OFF      CACHE BOOL "")
set(LLVM_ENABLE_LIBEDIT       OFF      CACHE BOOL "")
set(LLVM_ENABLE_LIBPFM        OFF      CACHE BOOL "")
set(LLVM_ENABLE_LIBXML2       OFF      CACHE STRING "")
set(LLVM_ENABLE_PIC           ON       CACHE BOOL "")
set(LLVM_ENABLE_PLUGINS       OFF      CACHE BOOL "")
set(LLVM_ENABLE_RTTI          OFF      CACHE BOOL "")
set(LLVM_ENABLE_UNWIND_TABLES OFF      CACHE BOOL "")
set(LLVM_ENABLE_Z3_SOLVER     OFF      CACHE BOOL "")
set(LLVM_ENABLE_ZLIB          FORCE_ON CACHE STRING "")
set(LLVM_ENABLE_ZSTD          FORCE_ON CACHE STRING "")

set(LLVM_INCLUDE_BENCHMARKS OFF  CACHE BOOL "")
set(LLVM_INCLUDE_DOCS       OFF  CACHE BOOL "")
set(LLVM_INCLUDE_EXAMPLES   OFF  CACHE BOOL "")
set(LLVM_INCLUDE_TESTS      OFF  CACHE BOOL "")
set(LLVM_INCLUDE_UTILS      OFF  CACHE BOOL "")

set(LLVM_INSTALL_BINUTILS_SYMLINKS ON CACHE BOOL "")
set(LLVM_INSTALL_TOOLCHAIN_ONLY    ON CACHE BOOL "")

set(LLVM_TARGETS_TO_BUILD "X86;SystemZ;RISCV;PowerPC;ARM;AArch64;LoongArch" CACHE STRING "")

set(LLVM_TOOL_LLVM_COV_BUILD      OFF  CACHE BOOL "")
set(LLVM_TOOL_LLVM_MCA_BUILD      OFF  CACHE BOOL "")
set(LLVM_TOOL_LLVM_ML_BUILD       OFF  CACHE BOOL "")
set(LLVM_TOOL_LLVM_PDBUTIL_BUILD  OFF  CACHE BOOL "")
set(LLVM_TOOL_LLVM_PROFDATA_BUILD OFF  CACHE BOOL "")
set(LLVM_TOOL_LLVM_PROFGEN_BUILD  OFF  CACHE BOOL "")
set(LLVM_TOOL_LLVM_RC_BUILD       OFF  CACHE BOOL "")
set(LLVM_TOOL_LTO_BUILD           OFF  CACHE BOOL "")
set(LLVM_TOOL_OPT_VIEWER_BUILD    OFF  CACHE BOOL "")
set(LLVM_TOOL_REMARKS_SHLIB_BUILD OFF  CACHE BOOL "")

set(DLLVM_USE_LINKER "lld" CACHE STRING "")

# clang options
set(CLANG_ENABLE_STATIC_ANALYZER            OFF CACHE BOOL "")
set(CLANG_ENABLE_OBJC_REWRITER              OFF CACHE BOOL "")
set(CLANG_TOOL_APINOTES_TEST_BUILD          OFF CACHE BOOL "")
set(CLANG_TOOL_C_INDEX_TEST_BUILD           OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_FORMAT_BUILD           OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_INSTALLAPI_BUILD       OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_LINKER_WRAPPER_BUILD   OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_NVLINK_WRAPPER_BUILD   OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_OFFLOAD_BUNDLER_BUILD  OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_OFFLOAD_PACKAGER_BUILD OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_REFACTOR_BUILD         OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_REPL_BUILD             OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_SCAN_DEPS_BUILD        OFF CACHE BOOL "")
set(CLANG_TOOL_CLANG_SYCL_LINKER_BUILD      OFF CACHE BOOL "")
set(CLANG_TOOL_DIAGTOOL_BUILD               OFF CACHE BOOL "")
set(CLANG_TOOL_LIBCLANG_BUILD               OFF CACHE BOOL "")
set(CLANG_TOOL_OFFLOAD_ARCH_BUILD           OFF CACHE BOOL "")
